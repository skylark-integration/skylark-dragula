/**
 * skylark-dragula - A version of dragula.js that ported to running on skylarkjs.
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-dragula/
 * @license MIT
 */
!function(e,n){var t=n.define,r=n.require,o="function"==typeof t&&t.amd,i=!o&&"undefined"!=typeof exports;if(!o&&!t){var u={};t=n.define=function(e,n,t){"function"==typeof t?(u[e]={factory:t,deps:n.map(function(n){return function(e,n){if("."!==e[0])return e;var t=n.split("/"),r=e.split("/");t.pop();for(var o=0;o<r.length;o++)"."!=r[o]&&(".."==r[o]?t.pop():t.push(r[o]));return t.join("/")}(n,e)}),resolved:!1,exports:null},r(e)):u[e]={factory:null,resolved:!0,exports:t}},r=n.require=function(e){if(!u.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var t=u[e];if(!t.resolved){var o=[];t.deps.forEach(function(e){o.push(r(e))}),t.exports=t.factory.apply(n,o)||null,t.resolved=!0}return t.exports}}if(!t)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(e,n){e("skylark-dragula/atoa",[],function(){return function(e,n){return Array.prototype.slice.call(e,n)}}),e("skylark-dragula/ticky",[],function(){var e="function"==typeof setImmediate;return e?function(e){setImmediate(e)}:function(e){setTimeout(e,0)}}),e("skylark-dragula/debounce",["./ticky"],function(e){return function(n,t,r){n&&e(function(){n.apply(r||null,t||[])})}}),e("skylark-dragula/emitter",["./atoa","./debounce"],function(e,n){"use strict";return function(t,r){var o=r||{},i={};void 0===t&&(t={});return t.on=function(e,n){return i[e]?i[e].push(n):i[e]=[n],t},t.once=function(e,n){return n._once=!0,t.on(e,n),t},t.off=function(e,n){var r=arguments.length;if(1===r)delete i[e];else if(0===r)i={};else{var o=i[e];if(!o)return t;o.splice(o.indexOf(n),1)}return t},t.emit=function(){var n=e(arguments);return t.emitterSnapshot(n.shift()).apply(this,n)},t.emitterSnapshot=function(r){var u=(i[r]||[]).slice(0);return function(){var i=e(arguments),a=this||t;if("error"===r&&!1!==o.throws&&!u.length)throw 1===i.length?i[0]:i;return u.forEach(function(e){o.async?n(e,i,a):e.apply(a,i),e._once&&t.off(r,e)}),t}},t}}),e("skylark-dragula/custom-event",[],function(){var e=window,n=e.CustomEvent;return function(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?n:"function"==typeof document.createEvent?function(e,n){var t=document.createEvent("CustomEvent");return n?t.initCustomEvent(e,n.bubbles,n.cancelable,n.detail):t.initCustomEvent(e,!1,!1,void 0),t}:function(e,n){var t=document.createEventObject();return t.type=e,n?(t.bubbles=Boolean(n.bubbles),t.cancelable=Boolean(n.cancelable),t.detail=n.detail):(t.bubbles=!1,t.cancelable=!1,t.detail=void 0),t}}),e("skylark-dragula/eventmap",[],function(){"use strict";var e=window,n=[],t="",r=/^on/;for(t in e)r.test(t)&&n.push(t.slice(2));return n}),e("skylark-dragula/crossvent",["./custom-event","./eventmap"],function(e,n){"use strict";var t=window,r=t.document,o=function(e,n,t,r){return e.addEventListener(n,t,r)},i=function(e,n,t,r){return e.removeEventListener(n,t,r)},u=[];function a(e,n,t){var r=function(e,n,t){var r,o;for(r=0;r<u.length;r++)if((o=u[r]).element===e&&o.type===n&&o.fn===t)return r}(e,n,t);if(r){var o=u[r].wrapper;return u.splice(r,1),o}}return t.addEventListener||(o=function(e,n,r){return e.attachEvent("on"+n,function(e,n,r){var o=a(e,n,r)||function(e,n,r){return function(n){var o=n||t.event;o.target=o.target||o.srcElement,o.preventDefault=o.preventDefault||function(){o.returnValue=!1},o.stopPropagation=o.stopPropagation||function(){o.cancelBubble=!0},o.which=o.which||o.keyCode,r.call(e,o)}}(e,0,r);return u.push({wrapper:o,element:e,type:n,fn:r}),o}(e,n,r))},i=function(e,n,t){var r=a(e,n,t);if(r)return e.detachEvent("on"+n,r)}),{add:o,remove:i,fabricate:function(t,o,i){var u=-1===n.indexOf(o)?new e(o,{detail:i}):function(){var e;r.createEvent?(e=r.createEvent("Event")).initEvent(o,!0,!0):r.createEventObject&&(e=r.createEventObject());return e}();t.dispatchEvent?t.dispatchEvent(u):t.fireEvent("on"+o,u)}}}),e("skylark-dragula/classes",[],function(){var e={},n="(?:^|\\s)",t="(?:\\s|$)";function r(r){var o=e[r];return o?o.lastIndex=0:e[r]=o=new RegExp(n+r+t,"g"),o}return{add:function(e,n){var t=e.className;t.length?r(n).test(t)||(e.className+=" "+n):e.className=n},rm:function(e,n){e.className=e.className.replace(r(n)," ").trim()}}}),e("skylark-dragula/dragula",["skylark-langx/skylark","./emitter","./crossvent","./classes"],function(e,n,t,r){"use strict";var o=window,i=o.document,u=i.documentElement;function a(e,n,r,i){o.navigator.pointerEnabled?t[n](e,{mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"}[r],i):o.navigator.msPointerEnabled?t[n](e,{mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"}[r],i):(t[n](e,{mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"}[r],i),t[n](e,r,i))}function c(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var n=e.button;return void 0!==n?1&n?1:2&n?3:4&n?2:0:void 0}function l(e,n){return void 0!==o[n]?o[n]:u.clientHeight?u[e]:i.body[e]}function f(e,n,t){var r,o=e||{},u=o.className;return o.className+=" gu-hide",r=i.elementFromPoint(n,t),o.className=u,r}function s(){return!1}function d(){return!0}function v(e){return e.width||e.right-e.left}function m(e){return e.height||e.bottom-e.top}function p(e){return e.parentNode===i?null:e.parentNode}function g(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||function e(n){if(!n)return!1;if("false"===n.contentEditable)return!1;if("true"===n.contentEditable)return!0;return e(p(n))}(e)}function h(e){return e.nextElementSibling||function(){var n=e;do{n=n.nextSibling}while(n&&1!==n.nodeType);return n}()}function y(e,n){var t=function(e){if(e.targetTouches&&e.targetTouches.length)return e.targetTouches[0];if(e.changedTouches&&e.changedTouches.length)return e.changedTouches[0];return e}(n),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in t)&&r[e]in t&&(e=r[e]),t[e]}return e.dragula=function(e,o){var b,k,w,E,S,C,x,T,O,N,X;1===arguments.length&&!1===Array.isArray(e)&&(o=e,e=[]);var P,Y=null,B=o||{};void 0===B.moves&&(B.moves=d);void 0===B.accepts&&(B.accepts=d);void 0===B.invalid&&(B.invalid=function(){return!1});void 0===B.containers&&(B.containers=e||[]);void 0===B.isContainer&&(B.isContainer=s);void 0===B.copy&&(B.copy=!1);void 0===B.copySortSource&&(B.copySortSource=!1);void 0===B.revertOnSpill&&(B.revertOnSpill=!1);void 0===B.removeOnSpill&&(B.removeOnSpill=!1);void 0===B.direction&&(B.direction="vertical");void 0===B.ignoreInputTextSelection&&(B.ignoreInputTextSelection=!0);void 0===B.mirrorContainer&&(B.mirrorContainer=i.body);var I=n({containers:B.containers,start:function(e){var n=F(e);n&&K(n)},end:U,cancel:$,remove:V,destroy:function(){D(!0),z({})},canMove:function(e){return!!F(e)},dragging:!1});!0===B.removeOnSpill&&I.on("over",function(e){r.rm(e,"gu-hide")}).on("out",function(e){I.dragging&&r.add(e,"gu-hide")});return D(),I;function j(e){return-1!==I.containers.indexOf(e)||B.isContainer(e)}function D(e){var n=e?"remove":"add";a(u,n,"mousedown",L),a(u,n,"mouseup",z)}function M(e){var n=e?"remove":"add";a(u,n,"mousemove",q)}function R(e){var n=e?"remove":"add";t[n](u,"selectstart",A),t[n](u,"click",A)}function A(e){P&&e.preventDefault()}function L(e){C=e.clientX,x=e.clientY;var n=1!==c(e)||e.metaKey||e.ctrlKey;if(!n){var t=e.target,r=F(t);r&&(P=r,M(),"mousedown"===e.type&&(g(t)?t.focus():e.preventDefault()))}}function q(e){if(P)if(0!==c(e)){if(void 0===e.clientX||e.clientX!==C||void 0===e.clientY||e.clientY!==x){if(B.ignoreInputTextSelection){var n=y("clientX",e),t=y("clientY",e),o=i.elementFromPoint(n,t);if(g(o))return}var f=P;M(!0),R(),U(),K(f);var s,d={left:(s=w.getBoundingClientRect()).left+l("scrollLeft","pageXOffset"),top:s.top+l("scrollTop","pageYOffset")};E=y("pageX",e)-d.left,S=y("pageY",e)-d.top,r.add(N||w,"gu-transit"),function(){if(b)return;var e=w.getBoundingClientRect();(b=w.cloneNode(!0)).style.width=v(e)+"px",b.style.height=m(e)+"px",r.rm(b,"gu-transit"),r.add(b,"gu-mirror"),B.mirrorContainer.appendChild(b),a(u,"add","mousemove",W),r.add(B.mirrorContainer,"gu-unselectable"),I.emit("cloned",b,w,"mirror")}(),W(e)}}else z({})}function F(e){if(!(I.dragging&&b||j(e))){for(var n=e;p(e)&&!1===j(p(e));){if(B.invalid(e,n))return;if(!(e=p(e)))return}var t=p(e);if(t&&!B.invalid(e,n)){var r=B.moves(e,t,n,h(e));if(r)return{item:e,source:t}}}}function K(e){var n,t;n=e.item,t=e.source,("boolean"==typeof B.copy?B.copy:B.copy(n,t))&&(N=e.item.cloneNode(!0),I.emit("cloned",N,e.item,"copy")),k=e.source,w=e.item,T=O=h(e.item),I.dragging=!0,I.emit("drag",w,k)}function U(){if(I.dragging){var e=N||w;H(e,p(e))}}function _(){P=!1,M(!0),R(!0)}function z(e){if(_(),I.dragging){var n=N||w,t=y("clientX",e),r=y("clientY",e),o=f(b,t,r),i=Q(o,t,r);i&&(N&&B.copySortSource||!N||i!==k)?H(n,i):B.removeOnSpill?V():$()}}function H(e,n){var t=p(e);N&&B.copySortSource&&n===k&&t.removeChild(w),J(n)?I.emit("cancel",e,k,k):I.emit("drop",e,n,k,O),G()}function V(){if(I.dragging){var e=N||w,n=p(e);n&&n.removeChild(e),I.emit(N?"cancel":"remove",e,n,k),G()}}function $(e){if(I.dragging){var n=arguments.length>0?e:B.revertOnSpill,t=N||w,r=p(t),o=J(r);!1===o&&n&&(N?r&&r.removeChild(N):k.insertBefore(t,T)),o||n?I.emit("cancel",t,k,k):I.emit("drop",t,r,k,O),G()}}function G(){var e=N||w;_(),b&&(r.rm(B.mirrorContainer,"gu-unselectable"),a(u,"remove","mousemove",W),p(b).removeChild(b),b=null),e&&r.rm(e,"gu-transit"),X&&clearTimeout(X),I.dragging=!1,Y&&I.emit("out",e,Y,k),I.emit("dragend",e),k=w=N=T=O=X=Y=null}function J(e,n){var t;return t=void 0!==n?n:b?O:h(N||w),e===k&&t===T}function Q(e,n,t){for(var r=e;r&&!o();)r=p(r);return r;function o(){var o=j(r);if(!1===o)return!1;var i=Z(r,e),u=ee(r,i,n,t),a=J(r,u);return!!a||B.accepts(w,r,k,u)}}function W(e){if(b){e.preventDefault();var n=y("clientX",e),t=y("clientY",e),r=n-E,o=t-S;b.style.left=r+"px",b.style.top=o+"px";var i=N||w,u=f(b,n,t),a=Q(u,n,t),c=null!==a&&a!==Y;(c||null===a)&&(Y&&v("out"),Y=a,c&&v("over"));var l=p(i);if(a!==k||!N||B.copySortSource){var s,d=Z(a,u);if(null!==d)s=ee(a,d,n,t);else{if(!0!==B.revertOnSpill||N)return void(N&&l&&l.removeChild(i));s=T,a=k}(null===s&&c||s!==i&&s!==h(i))&&(O=s,a.insertBefore(i,s),I.emit("shadow",i,a,k))}else l&&l.removeChild(i)}function v(e){I.emit(e,i,Y,k)}}function Z(e,n){for(var t=n;t!==e&&p(t)!==e;)t=p(t);return t===u?null:t}function ee(e,n,t,r){var o="horizontal"===B.direction,i=n!==e?function(){var e=n.getBoundingClientRect();if(o)return u(t>e.left+v(e)/2);return u(r>e.top+m(e)/2)}():function(){var n,i,u,a=e.children.length;for(n=0;n<a;n++){if(i=e.children[n],u=i.getBoundingClientRect(),o&&u.left+u.width/2>t)return i;if(!o&&u.top+u.height/2>r)return i}return null}();return i;function u(e){return e?h(n):n}}}}),e("skylark-dragula/main",["./dragula"],function(e){return e}),e("skylark-dragula",["skylark-dragula/main"],function(e){return e})}(t),!o){var a=r("skylark-langx/skylark");i?module.exports=a:n.skylarkjs=a}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-dragula.js.map
