{"version":3,"sources":["_helpers.js"],"names":["define","skylark","mouse","touch","noder","finder","geom","eventer","styler","getEventHost","e","targetTouches","length","changedTouches","touchy","el","op","type","fn","on","off","touchInited","mousy","whichMouseButton","touches","which","buttons","button","getRectWidth","rect","width","right","left","getRectHeight","height","bottom","top","getCoord","coord","host","missMap","pageX","pageY"],"mappings":";;;;;;;AAAAA,QACE,wBACA,+BACA,+BACA,qBACA,sBACA,oBACA,uBACA,uBACA,SACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAEE,aAqCA,SAASC,EAAcC,GAIrB,OAAIA,EAAEC,eAAiBD,EAAEC,cAAcC,OAC9BF,EAAEC,cAAc,GAErBD,EAAEG,gBAAkBH,EAAEG,eAAeD,OAChCF,EAAEG,eAAe,GAEnBH,EAeT,OACCI,OA7DD,SAAiBC,EAAIC,EAAIC,EAAMC,GACnB,OAANF,EACFT,EAAQY,GAAGJ,EAAGE,EAAKC,GAEnBX,EAAQa,IAAIL,EAAGE,EAAKC,GAGjBH,EAAGM,cACNN,EAAGM,aAAc,EACjBlB,EAAMmB,MAAMP,KAqDfQ,iBAjDD,SAA2Bb,GAEzB,QAAkB,IAAdA,EAAEc,QAAsB,OAAOd,EAAEc,QAAQZ,OAC7C,QAAgB,IAAZF,EAAEe,OAAgC,IAAZf,EAAEe,MAAe,OAAOf,EAAEe,MACpD,QAAkB,IAAdf,EAAEgB,QAAsB,OAAOhB,EAAEgB,QACrC,IAAIC,EAASjB,EAAEiB,OACf,YAAe,IAAXA,EACc,EAATA,EAAa,EAAa,EAATA,EAAa,EAAc,EAATA,EAAa,EAAI,OAD7D,GA4CDC,aApCD,SAAuBC,GACrB,OAAOA,EAAKC,OAAUD,EAAKE,MAAQF,EAAKG,MAoCzCC,cAlCD,SAAwBJ,GACtB,OAAOA,EAAKK,QAAWL,EAAKM,OAASN,EAAKO,KAkC3C3B,aAAAA,EACA4B,SAlBD,SAAmBC,EAAO5B,GACxB,IAAI6B,EAAO9B,EAAaC,GACpB8B,GACFC,MAAO,UACPC,MAAO,WAKT,OAHIJ,KAASE,KAAaF,KAASC,IAASC,EAAQF,KAAUC,IAC5DD,EAAQE,EAAQF,IAEXC,EAAKD","file":"../_helpers.js","sourcesContent":["define([\r\n  \"skylark-langx/skylark\",\r\n  \"skylark-devices-points/mouse\",\r\n  \"skylark-devices-points/touch\",\r\n  \"skylark-domx-noder\",\r\n  \"skylark-domx-finder\",\r\n  \"skylark-domx-geom\",\r\n  \"skylark-domx-eventer\",\r\n  \"skylark-domx-styler\"\r\n],function(\r\n  skylark,\r\n  mouse,\r\n  touch,\r\n  noder,\r\n  finder,\r\n  geom,\r\n  eventer,\r\n  styler\r\n ){\r\n    'use strict';\r\n\r\n    function touchy (el, op, type, fn) {\r\n      if (op == \"add\") {\r\n        eventer.on(el,type,fn);\r\n      } else {\r\n        eventer.off(el,type,fn);\r\n      }\r\n\r\n      if (!el.touchInited) {\r\n        el.touchInited = true;   \r\n        touch.mousy(el);     \r\n      }\r\n    }\r\n\r\n    function whichMouseButton (e) {\r\n    \r\n      if (e.touches !== void 0) { return e.touches.length; }\r\n      if (e.which !== void 0 && e.which !== 0) { return e.which; } // see https://github.com/bevacqua/dragula/issues/261\r\n      if (e.buttons !== void 0) { return e.buttons; }\r\n      var button = e.button;\r\n      if (button !== void 0) { // see https://github.com/jquery/jquery/blob/99e8ff1baa7ae341e94bb89c3e84570c7c3ad9ea/src/event.js#L573-L575\r\n        return button & 1 ? 1 : button & 2 ? 3 : (button & 4 ? 2 : 0);\r\n      }\r\n\r\n    }\r\n\r\n\r\n    \r\n    function getRectWidth (rect) { \r\n      return rect.width || (rect.right - rect.left); \r\n    }\r\n    function getRectHeight (rect) { \r\n      return rect.height || (rect.bottom - rect.top); \r\n    }\r\n\r\n\r\n    function getEventHost (e) {\r\n      // on touchend event, we have to use `e.changedTouches`\r\n      // see http://stackoverflow.com/questions/7192563/touchend-event-properties\r\n      // see https://github.com/bevacqua/dragula/issues/34\r\n      if (e.targetTouches && e.targetTouches.length) {\r\n        return e.targetTouches[0];\r\n      }\r\n      if (e.changedTouches && e.changedTouches.length) {\r\n        return e.changedTouches[0];\r\n      }\r\n      return e;\r\n    }\r\n\r\n    function getCoord (coord, e) {\r\n      var host = getEventHost(e);\r\n      var missMap = {\r\n        pageX: 'clientX', // IE8\r\n        pageY: 'clientY' // IE8\r\n      };\r\n      if (coord in missMap && !(coord in host) && missMap[coord] in host) {\r\n        coord = missMap[coord];\r\n      }\r\n      return host[coord];\r\n    }\r\n\r\n    return {\r\n    \ttouchy,\r\n    \twhichMouseButton,\r\n    \tgetRectWidth,\r\n    \tgetRectHeight,\r\n    \tgetEventHost,\r\n    \tgetCoord\r\n    };\r\n});"]}